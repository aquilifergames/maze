<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Safe Zone</title>
        <script src="phaser.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {

        var game = new Phaser.Game(770, 770, Phaser.CANVAS, '', { preload: preload, create: create, update: update });
        var map;
        var mainCharacter;
        var colissionLayer;

        function preload () {
            game.physics.startSystem(Phaser.Physics.ARCADE);


            game.load.tilemap('map', 'assets/map2.json', null, Phaser.Tilemap.TILED_JSON);
            game.load.image('mainCharacter', 'assets/ball.png');
            game.load.image('tiles', 'assets/tilesheet_complete.png');
        }

        function create () {

            map = game.add.tilemap('map');
            map.addTilesetImage('tilesheet_complete', 'tiles');

            map.createLayer('fondo');
            colissionLayer = map.createLayer('colision');
            map.setCollision([0,93], true, colissionLayer);
            game.physics.arcade.enable(colissionLayer);

            mainCharacter =  game.add.sprite(70, 350, 'mainCharacter');
            mainCharacter.anchor.x = mainCharacter.anchor.y = 0.2;
            game.physics.arcade.enable(mainCharacter);

            mainCharacter.body.collideWorldBounds = true;
            mainCharacter.body.setSize(30, 30);
            mainCharacter.body.tilePadding.set(32, 32);
        
        }

        function update () {
            game.debug.body(mainCharacter);
            game.physics.arcade.collide(mainCharacter, colissionLayer);
            cursors = game.input.keyboard.createCursorKeys();

            mainCharacter.body.velocity.x = 0;
            mainCharacter.body.velocity.y = 0;

            if (cursors.left.isDown) {
                mainCharacter.body.velocity.x = -200;
            }

           if (cursors.right.isDown)
            {
                mainCharacter.body.velocity.x = 200;
            }

            if (cursors.up.isDown)
            {
                mainCharacter.body.velocity.y = -200;
            }
             if (cursors.down.isDown)
            {
                 mainCharacter.body.velocity.y = 200;   
            
            }
        }
    };

    </script>

    </body>
</html>